<html>
	<head>
		<title>Your Gee-Mail Account</title>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){



     function makeElem(elem, label, inside){
  			var container = document.createElement(elem);
  			container.className = label;
  			container.innerHTML = inside;
 
  			return container;
		}
	
	for(var i = 0; i < geemails.length; i++){
        	console.log(geemails[i].sender);
        	console.log(geemails[i].subject);
        	console.log(geemails[i].body);
        	console.log(geemails[i].date);
     	
     	var senderElem = makeElem("h5", "sender", geemails[i].sender);
     	main.appendChild(senderElem);

     	var subjectElem = makeElem("p", "subject", geemails[i].subject);
     	senderElem.appendChild(subjectElem);

     	var dateElem = makeElem("p", "date", geemails[i].date);
     	senderElem.appendChild(dateElem);

     	var bodyElem = makeElem("p", "body", geemails[i].body);
     	bodyElem.style.display = "none";
     	senderElem.appendChild(bodyElem);

    //  	var senderElem = document.createElement("h5");
  		// senderElem.className = "sender";
  		// senderElem.innerHTML = geemails[i].sender;
  		// main.appendChild(senderElem);
  
  		// var subjectElem = document.createElement("p");
  		// subjectElem.className = "subject";
  		// subjectElem.innerHTML = geemails[i].subject;
  		// senderElem.appendChild(subjectElem);

  		// var dateElem = document.createElement("p");
  		// dateElem.className = "date";
  		// dateElem.innerHTML = geemails[i].date;
  		// senderElem.appendChild(dateElem);

  		// var bodyElem = document.createElement("p");
  		// bodyElem.className = "body";
  		// bodyElem.innerHTML = geemails[i].body;
  		// bodyElem.style.display = "none";
  		// senderElem.appendChild(bodyElem);

     	}

     	var messageBox = document.getElementsByClassName("sender");
		for(var i = 0; i < messageBox.length; i++){
  			messageBox[i].addEventListener("click", showMessage);
		}


		function showMessage(){
  
  		var messageItem = this.querySelectorAll(".body")[0];
  		if(messageItem.style.display === "none"){
    	messageItem.style.display = "block";
  		}else{
    	messageItem.style.display = "none";
  		}

		}

		var countElem = document.getElementById("count")
			countElem.innerHTML = "Inbox: " + geemails.length;

		function inboxCount(){
			var countElem = document.getElementById("count")
			countElem.innerHTML = "Inbox: " + ++geemails.length;

		}

		setInterval(inboxCount, 3000);


		function emails (){

			var myNewMessage = getNewMessage();	
				console.log(myNewMessage);
			
			var senderElem = makeElem("h5", "sender", myNewMessage.sender);
     		main.insertBefore(senderElem, main.childNodes[0]);

     		var subjectElem = makeElem("p", "subject", myNewMessage.subject);
     		senderElem.appendChild(subjectElem);

	     	var dateElem = makeElem("p", "date", myNewMessage.date);
	     	senderElem.appendChild(dateElem);

	     	var bodyElem = makeElem("p", "body", myNewMessage.body);
	     	bodyElem.style.display = "none";
	     	senderElem.appendChild(bodyElem);		

			// var senderElem = document.createElement("h5");
  	// 		senderElem.className = "sender";
  	// 		senderElem.innerHTML = myNewMessage.sender;
  	// 		main.insertBefore(senderElem, main.childNodes[0]);
  
  	// 		var subjectElem = document.createElement("p");
  	// 		subjectElem.className = "subject";
  	// 		subjectElem.innerHTML = myNewMessage.subject;
  	// 		senderElem.appendChild(subjectElem);

  	// 		var dateElem = document.createElement("p");
  	// 		dateElem.className = "date";
  	// 		dateElem.innerHTML = myNewMessage.date;
  	// 		senderElem.appendChild(dateElem);

  	// 		var bodyElem = document.createElement("p");
  	// 		bodyElem.className = "body";
  	// 		bodyElem.innerHTML = myNewMessage.body;
  	// 		bodyElem.style.display = "none";
  	// 		senderElem.appendChild(bodyElem);
			
			var messageBox = document.getElementsByClassName("sender");
			for(var i = 0; i < messageBox.length; i++){
  			messageBox[i].addEventListener("click", showMessage);
			}
			
			function showMessage(){
  
  				var messageItem = this.querySelectorAll(".body")[0];
  				if(messageItem.style.display === "none"){
    			messageItem.style.display = "block";
  				}else{
    			messageItem.style.display = "none";
  				}
			}

		}			
		
		setInterval(emails, 3000);

		function topFunction() {
    		document.body.scrollTop = 0;
    		document.documentElement.scrollTop = 0;
		}     
		
		window.onscroll = function() {scrollFunction()};
		document.getElementById("backtotop").addEventListener("click", topFunction);

		function scrollFunction(){
    		if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 
    	20) {
        		document.getElementById("backtotop").style.display = "block";
    		} else {
        		document.getElementById("backtotop").style.display = "none";
    		}
		}
	};

    </script>
	</head>
	<body>
		<header>
			<h5 class="welcome">Welcome, Guest!</h5><h5 class="sign-out"><a href="#">Sign Out</a></h5>
			<h1 class="title">Gee-Mail</h1>
		</header>
		<button onclick="topFunction()" id="backtotop"><span>Top</span></button>
		<nav>
  			<ul>
    			<h2><li><a id="count" class="button" href="#"></a></li></h2>
    			<h4><li><a href="#">Compose</a></li></h4>
    			<h4><li><a href="#">Sent</a></li></h4>
  				<h4><li><a href="#">Drafts</a></li></h4>
  				<h4><li><a href="#">Flagged</a></li></h4>
  				<h4><li><a href="#">Spam</a></li></h4>
  			</ul>
		</nav>
		<div class="container" id="main"></div>
	</body>
</html>